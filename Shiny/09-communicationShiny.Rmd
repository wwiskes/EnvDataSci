---
title: "Communication using Shiny"
author: "Jerry Davis"
date: "4/17/2021"
output: html_document
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Shiny lets you include interactive controls letting the user manipulating your R analysis.

Since Shiny apps require a host to run the R code on, we can't create it as part of 
a chapter in the book. But we can look at it in this RMarkdown document.  

To learn more about Shiny apps, see [Interactive Documents](http://rmarkdown.rstudio.com/authoring_shiny.html).

## Inputs and Outputs

We'll start by looking at Shiny inputs and outputs:  

- Inputs are the interactive controls that let the user change the resulting output.
- Outputs are the graphs, maps or tables, and are automatically updated whenever inputs change. 
The following includes a couple of widget-controlled input settings to be used in a plot produced by `renderPlot`

- a `selectInput` that is used to set the `breaks` parameter for the `hist` function as a number of bins
- a `sliderInput` to set the `adjust` (bandwidth adjustment) parameter for the density plot

Note how the input variables are accessed by the output function as `input$n_breaks` and `input$bw_adjust`:

```{r eruptions}
inputPanel(
  selectInput("n_breaks", label = "Number of bins:",
              choices = c(10, 20, 35, 50), selected = 20),
  
  sliderInput("bw_adjust", label = "Bandwidth adjustment:",
              min = 0.2, max = 2, value = 1, step = 0.2)
)

renderPlot({
  hist(faithful$eruptions, probability = TRUE, breaks = as.numeric(input$n_breaks),
       xlab = "Duration (minutes)", main = "Geyser eruption duration")
  
  dens <- density(faithful$eruptions, adjust = input$bw_adjust)
  lines(dens, col = "blue")
})
```



## Embedded Application

Here's an entire Shiny application embedded within our R Markdown document using the `shinyAppDir` function:

```{r tabsets, echo=FALSE}
shinyAppDir(
  "apps/sierra",
  options = list(
    width = "100%", height = 700
  )
)
```





